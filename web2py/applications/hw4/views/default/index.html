{{extend 'layout.html'}}

{{block head}}
<!-- load vue js 'scaffolding' -->
<script src="{{=URL('static', 'js/vue.js')}}"></script>
<script>
	var my_url = "{{=URL('api', 'my_method')}}";
   	// var add_post_url = "{{=URL('api', 'add_post', user_signature=True)}}";
   	var get_product_list_url = "{{=URL('api', 'get_product_list')}}";
   	var set_stars_url = "{{=URL('api', 'set_stars', user_signature=True, hash_vars=False)}}";
   	var is_logged_in = {{='false' if auth.user is None else 'true'}};

   </script>
   {{end}}

   <div class="main_content">

   	<div id="vue-div" class="display:none">
   		<!-- Your code goes here.  Remember to call $("#vue-div").show() once you get the data for the first time. -->

   		<!-- Message in case there are no posts. -->
   		<div v-if="product_list.length === 0">There are no products.</div>

   		<!-- We display the posts. -->
   		<div class="product_list">
   			<div class="product-container" v-for="prod in product_list">
   				<div class="product-top-row">
   					<div class="prod_name">${prod.prod_name}</div>
   					<div class="prod_price">${prod.prod_price}</div>
   				</div>
   				<div class="prod_desc">${prod.prod_desc}</div>
   				<!-- Code for start ratings. -->
   				<div v-if="is_logged_in" class="star_rating">
   					<span v-on:mouseout="stars_out(prod._idx)">
   						<span v-on:mouseover="stars_over(prod._idx, idx)"
   						v-on:click="set_stars(prod._idx, idx)"
   						v-for="idx in star_indices">
   						<i v-if="idx <= prod._num_stars_display" class="fa fa-star"></i>
   						<i v-if="idx > prod._num_stars_display" class="fa fa-star-o"></i>
   					</span>
   				</span>
   			</div>	
   		</div>
   	</div>
   </div>

</div>
<!-- load my js -->
<script src="{{=URL('static', 'js/default_index.js')}}"></script>
